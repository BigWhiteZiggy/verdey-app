<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verdey - Sports Betting Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900">
  <div id="app"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <script type="text/babel">
    const { useState } = React;

    const Icon = ({ name, size = 20, className = '' }) => {
      const ref = React.useRef(null);
      React.useEffect(() => {
        if (ref.current) {
          lucide.createIcons();
        }
      }, [name]);
      return React.createElement('i', {
        ref: ref,
        'data-lucide': name,
        className: className,
        style: { width: size, height: size }
      });
    };

    function App() {
      const [currentPage, setCurrentPage] = useState('dashboard');
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [profileTab, setProfileTab] = useState('stats');
      
      const [user, setUser] = useState({
        name: 'Alex Morgan',
        avatar: 'ðŸ‘¤',
        totalProfit: 2847.50,
        roi: 18.3,
        winRate: 64.2,
        verifiedRate: 92.5,
        onLeaderboard: true
      });

      const [bets, setBets] = useState([
        { id: 1, game: 'Lakers vs Warriors', amount: 100, odds: 2.1, result: 'win', profit: 110, date: '2026-01-15', sportsbook: 'FanDuel' },
        { id: 2, game: 'Chiefs vs Bills', amount: 200, odds: 1.85, result: 'loss', profit: -200, date: '2026-01-14', sportsbook: 'DraftKings' },
        { id: 3, game: 'Celtics vs Heat', amount: 150, odds: 1.95, result: 'win', profit: 142.5, date: '2026-01-13', sportsbook: 'FanDuel' },
        { id: 4, game: 'Cowboys vs 49ers', amount: 300, odds: 2.3, result: 'pending', profit: 0, date: '2026-01-16', sportsbook: 'BetMGM' },
        { id: 5, game: 'Knicks vs Nets', amount: 75, odds: 1.75, result: 'win', profit: 56.25, date: '2026-01-12', sportsbook: 'DraftKings' }
      ]);

      const [newBet, setNewBet] = useState({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
      const [verificationResult, setVerificationResult] = useState(null);
      const [uploadedImage, setUploadedImage] = useState(null);

      const dailyProfits = [
        { day: 'Mon', profit: 150 },
        { day: 'Tue', profit: -80 },
        { day: 'Wed', profit: 220 },
        { day: 'Thu', profit: 95 },
        { day: 'Fri', profit: -120 },
        { day: 'Sat', profit: 340 },
        { day: 'Sun', profit: 180 }
      ];

      const leaderboard = [
        { rank: 1, name: 'BettingKing23', profit: 12450, verified: 98 },
        { rank: 2, name: 'ProPicks', profit: 9830, verified: 95 },
        { rank: 3, name: 'SharpBettor', profit: 7215, verified: 100 },
        { rank: 4, name: 'Alex Morgan', profit: 2847.50, verified: 92.5 },
        { rank: 5, name: 'OddsWizard', profit: 2103, verified: 88 }
      ];

      const liveGames = [
        { game: 'Lakers @ Warriors', odds: '+145 / -165', time: 'Live - Q3' },
        { game: 'Celtics @ Heat', odds: '-120 / +100', time: 'Today 7:30 PM' },
        { game: 'Chiefs @ Bills', odds: '+180 / -210', time: 'Sunday 1:00 PM' }
      ];

      const recommendedBets = [
        { game: 'Cowboys vs 49ers', pick: 'Cowboys +3.5', odds: 1.91, confidence: 'High' },
        { game: 'Knicks vs Nets', pick: 'Over 218.5', odds: 1.87, confidence: 'Medium' }
      ];

      const handleImageUpload = async (e) => {
        const file = e.target.files[0];
        if (file) {
          setUploadedImage(URL.createObjectURL(file));
          
          const reader = new FileReader();
          reader.onloadend = async () => {
            const base64Image = reader.result.split(',')[1];
            
            try {
              const response = await fetch('https://verdey-backend.vercel.app/api/extract-bet-slip', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image: base64Image, filename: file.name })
              });

              if (!response.ok) throw new Error('Backend processing failed');

              const data = await response.json();
              
              setNewBet({
                game: data.sportsbook || 'Game from slip',
                amount: data.amount?.toString() || '0',
                odds: '2.15',
                sportsbook: data.sportsbook || 'Unknown',
                date: data.date || new Date().toISOString().split('T')[0]
              });
              
              alert('âœ“ Veryfi OCR Complete!\n\nExtracted bet details from your slip. Please review and correct any information before saving.');
              
            } catch (error) {
              console.error('Error processing slip:', error);
              alert('Error processing bet slip. Please try again or enter details manually.');
            }
          };
          reader.readAsDataURL(file);
        }
      };

      const handleAddBet = () => {
        if (newBet.game && newBet.amount && newBet.odds) {
          setBets([{ id: bets.length + 1, ...newBet, amount: parseFloat(newBet.amount), odds: parseFloat(newBet.odds), result: 'pending', profit: 0 }, ...bets]);
          setNewBet({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
          setCurrentPage('bets');
        }
      };

      const handleVerifySlip = (e) => {
        const file = e.target.files[0];
        if (file) {
          setUploadedImage(URL.createObjectURL(file));
          
          setTimeout(() => {
            const isLegitimate = Math.random() > 0.3;
            const baseConfidence = isLegitimate ? 75 : 45;
            const confidence = baseConfidence + Math.floor(Math.random() * 20);
            
            const legitimateFindings = [
              { category: 'Font Consistency', status: 'positive', detail: 'All text uses authentic system fonts matching database' },
              { category: 'Timestamp Analysis', status: 'positive', detail: 'Bet placement timestamp aligns with game schedule' },
              { category: 'UI Element Verification', status: 'positive', detail: 'Interface layout matches official sportsbook design' },
              { category: 'Metadata Integrity', status: 'positive', detail: 'Image metadata shows no signs of editing software' }
            ];
            
            const suspiciousFindings = [
              { category: 'Font Consistency', status: 'negative', detail: 'Text shows multiple font families' },
              { category: 'Pixel Analysis', status: 'negative', detail: 'Irregular compression patterns detected' },
              { category: 'Clone Detection', status: 'negative', detail: 'Copy-paste artifacts found' },
              { category: 'Color Variance', status: 'negative', detail: 'Digital manipulation signs detected' }
            ];
            
            let findings = isLegitimate ? legitimateFindings.slice(0, 4) : suspiciousFindings.slice(0, 4);
            
            setVerificationResult({
              verdict: isLegitimate ? 'Likely Legitimate' : 'Likely Fabricated',
              confidence: confidence,
              findings: findings
            });
          }, 2500);
        }
      };

      if (!isAuthenticated) {
        return (
          <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
            <div className="bg-gray-800 rounded-lg p-8 w-full max-w-md shadow-2xl">
              <div className="text-center mb-8">
                <h1 className="text-4xl font-bold text-green-500 mb-2">Verdey</h1>
                <p className="text-gray-400">Verify. Track. Win.</p>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-gray-300 mb-2 text-sm">Email</label>
                  <input type="email" className="w-full bg-gray-700 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="you@example.com" />
                </div>
                <div>
                  <label className="block text-gray-300 mb-2 text-sm">Password</label>
                  <input type="password" className="w-full bg-gray-700 text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
                </div>
                <button onClick={() => setIsAuthenticated(true)} className="w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg px-4 py-3 transition">
                  Log In
                </button>
              </div>
            </div>
          </div>
        );
      }

      const maxProfit = Math.max(...dailyProfits.map(d => Math.abs(d.profit)));

      return (
        <div className="min-h-screen bg-gray-900 text-white">
          <div className={`hidden md:flex fixed left-0 top-0 h-full bg-gray-800 transition-all duration-300 ${sidebarOpen ? 'w-64' : 'w-20'} flex-col z-30`}>
            <div className="p-6 flex items-center justify-between">
              {sidebarOpen && <h1 className="text-2xl font-bold text-green-500">Verdey</h1>}
              <button onClick={() => setSidebarOpen(!sidebarOpen)} className="text-gray-400 hover:text-white">
                <Icon name={sidebarOpen ? "x" : "menu"} size={24} />
              </button>
            </div>
            
            <nav className="flex-1 px-4">
              <button onClick={() => setCurrentPage('dashboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 transition ${currentPage === 'dashboard' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}`}>
                <Icon name="home" size={20} />
                {sidebarOpen && <span>Home</span>}
              </button>
              <button onClick={() => setCurrentPage('bets')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 transition ${currentPage === 'bets' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}`}>
                <Icon name="bar-chart-3" size={20} />
                {sidebarOpen && <span>Bets</span>}
              </button>
              <button onClick={() => setCurrentPage('leaderboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 transition ${currentPage === 'leaderboard' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}`}>
                <Icon name="users" size={20} />
                {sidebarOpen && <span>Leaderboard</span>}
              </button>
              <button onClick={() => setCurrentPage('profile')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 transition ${currentPage === 'profile' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}`}>
                <Icon name="user" size={20} />
                {sidebarOpen && <span>Profile</span>}
              </button>
            </nav>

            <div className="p-4 space-y-2">
              <button onClick={() => setCurrentPage('addbet')} className="w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 transition">
                <Icon name="plus" size={20} />
                {sidebarOpen && <span>Add Bet</span>}
              </button>
              <button onClick={() => setCurrentPage('verify')} className="w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2 transition">
                <Icon name="shield" size={20} />
                {sidebarOpen && <span>Verify Slip</span>}
              </button>
            </div>
          </div>

          <div className={`md:ml-64 ${!sidebarOpen ? 'md:ml-20' : ''} transition-all duration-300`}>
            <div className="md:hidden bg-gray-800 p-4 flex items-center justify-between sticky top-0 z-20">
              <h1 className="text-2xl font-bold text-green-500">Verdey</h1>
              <button onClick={() => setCurrentPage('verify')} className="bg-green-500 hover:bg-green-600 text-white rounded-lg px-4 py-2">
                Verify
              </button>
            </div>

            <div className="p-4 md:p-8 pb-24 md:pb-8">
              {currentPage === 'dashboard' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">Dashboard</h2>
                  
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="bg-gray-800 rounded-lg p-4">
                      <p className="text-gray-400 text-sm mb-1">Total P/L</p>
                      <p className={`text-2xl font-bold ${user.totalProfit > 0 ? 'text-green-400' : 'text-red-500'}`}>${user.totalProfit.toFixed(2)}</p>
                    </div>
                    <div className="bg-gray-800 rounded-lg p-4">
                      <p className="text-gray-400 text-sm mb-1">ROI</p>
                      <p className={`text-2xl font-bold ${user.roi > 0 ? 'text-green-400' : 'text-red-500'}`}>{user.roi}%</p>
                    </div>
                    <div className="bg-gray-800 rounded-lg p-4">
                      <p className="text-gray-400 text-sm mb-1">Win Rate</p>
                      <p className="text-2xl font-bold text-white">{user.winRate}%</p>
                    </div>
                    <div className="bg-gray-800 rounded-lg p-4">
                      <p className="text-gray-400 text-sm mb-1">Verified</p>
                      <p className="text-2xl font-bold text-white">{user.verifiedRate}%</p>
                    </div>
                  </div>

                  <div className="bg-gray-800 rounded-lg p-6">
                    <h3 className="text-xl font-semibold mb-4">Recent Bets</h3>
                    <div className="space-y-3">
                      {bets.slice(0, 5).map(bet => (
                        <div key={bet.id} className="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                          <div className="flex-1">
                            <p className="font-semibold">{bet.game}</p>
                            <p className="text-sm text-gray-400">{bet.date}</p>
                          </div>
                          <div className="text-right">
                            <p className={`font-bold ${bet.result === 'win' ? 'text-green-400' : bet.result === 'loss' ? 'text-red-500' : 'text-yellow-400'}`}>
                              ${bet.amount}
                            </p>
                            <p className="text-sm text-gray-400">{bet.result}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              )}

              {currentPage === 'bets' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">My Bets</h2>
                  <div className="space-y-4">
                    {bets.map(bet => (
                      <div key={bet.id} className="bg-gray-800 rounded-lg p-6">
                        <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                          <div className="flex-1">
                            <h3 className="text-lg font-semibold">{bet.game}</h3>
                            <div className="flex flex-wrap gap-4 mt-2 text-sm text-gray-400">
                              <span>{bet.sportsbook}</span>
                              <span>{bet.date}</span>
                              <span>Odds: {bet.odds}</span>
                            </div>
                          </div>
                          <div className="text-right">
                            <p className="text-2xl font-bold">${bet.amount}</p>
                            {bet.result !== 'pending' && (
                              <p className={`text-lg font-semibold ${bet.result === 'win' ? 'text-green-400' : 'text-red-500'}`}>
                                {bet.result === 'win' ? '+' : ''}{bet.profit.toFixed(2)}
                              </p>
                            )}
                          </div>
                          <span className={`font-semibold ${bet.result === 'win' ? 'text-green-400' : bet.result === 'loss' ? 'text-red-500' : 'text-yellow-400'}`}>
                            {bet.result === 'pending' ? 'Pending' : bet.result === 'win' ? 'Win' : 'Loss'}
                          </span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {currentPage === 'leaderboard' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">Community Leaderboard</h2>
                  <div className="bg-gray-800 rounded-lg overflow-hidden">
                    <table className="w-full">
                      <thead className="bg-gray-700">
                        <tr>
                          <th className="px-6 py-4 text-left">Rank</th>
                          <th className="px-6 py-4 text-left">User</th>
                          <th className="px-6 py-4 text-right">Total Profit</th>
                          <th className="px-6 py-4 text-right">Verified %</th>
                        </tr>
                      </thead>
                      <tbody>
                        {leaderboard.map(u => (
                          <tr key={u.rank} className="border-t border-gray-700 hover:bg-gray-700">
                            <td className="px-6 py-4 font-semibold">#{u.rank}</td>
                            <td className="px-6 py-4 font-semibold">{u.name}</td>
                            <td className="px-6 py-4 text-right text-green-400 font-semibold">${u.profit.toFixed(2)}</td>
                            <td className="px-6 py-4 text-right">{u.verified}%</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {currentPage === 'profile' && (
                <div className="space-y-6">
                  <div className="flex items-center gap-4">
                    <div className="text-6xl">{user.avatar}</div>
                    <div>
                      <h2 className="text-3xl font-bold">{user.name}</h2>
                      <p className="text-gray-400">@{user.name.toLowerCase().replace(' ', '')}</p>
                    </div>
                  </div>

                  <div className="flex gap-4 border-b border-gray-700">
                    <button onClick={() => setProfileTab('stats')} className={`px-4 py-2 font-semibold ${profileTab === 'stats' ? 'text-green-500 border-b-2 border-green-500' : 'text-gray-400'}`}>Stats</button>
                    <button onClick={() => setProfileTab('settings')} className={`px-4 py-2 font-semibold ${profileTab === 'settings' ? 'text-green-500 border-b-2 border-green-500' : 'text-gray-400'}`}>Settings</button>
                  </div>

                  {profileTab === 'stats' && (
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                      <div className="bg-gray-800 rounded-lg p-4">
                        <p className="text-gray-400 text-sm mb-1">Total P/L</p>
                        <p className={`text-2xl font-bold ${user.totalProfit > 0 ? 'text-green-400' : 'text-red-500'}`}>${user.totalProfit.toFixed(2)}</p>
                      </div>
                      <div className="bg-gray-800 rounded-lg p-4">
                        <p className="text-gray-400 text-sm mb-1">ROI</p>
                        <p className="text-2xl font-bold text-green-400">{user.roi}%</p>
                      </div>
                      <div className="bg-gray-800 rounded-lg p-4">
                        <p className="text-gray-400 text-sm mb-1">Win Rate</p>
                        <p className="text-2xl font-bold text-white">{user.winRate}%</p>
                      </div>
                      <div className="bg-gray-800 rounded-lg p-4">
                        <p className="text-gray-400 text-sm mb-1">Verified</p>
                        <p className="text-2xl font-bold text-white">{user.verifiedRate}%</p>
                      </div>
                    </div>
                  )}

                  {profileTab === 'settings' && (
                    <div className="bg-gray-800 rounded-lg p-6 space-y-4">
                      <div>
                        <label className="block text-gray-300 mb-2">Username</label>
                        <input type="text" value={user.name} onChange={(e) => setUser({...user, name: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      </div>
                      <div>
                        <label className="block text-gray-300 mb-2">Avatar Emoji</label>
                        <input type="text" value={user.avatar} onChange={(e) => setUser({...user, avatar: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" maxLength={2} />
                      </div>
                    </div>
                  )}
                </div>
              )}

              {currentPage === 'addbet' && (
                <div className="space-y-6 max-w-2xl">
                  <h2 className="text-3xl font-bold">Add Bet</h2>
                  
                  <div className="bg-gray-800 rounded-lg p-6">
                    <div className="mb-6">
                      <label className="block w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 text-center cursor-pointer">
                        <div className="flex items-center justify-center gap-2">
                          <Icon name="camera" size={20} />
                          <span>Upload Bet Slip (Veryfi AI)</span>
                        </div>
                        <input type="file" accept="image/*" onChange={handleImageUpload} className="hidden" />
                      </label>
                      {uploadedImage && <img src={uploadedImage} alt="Uploaded" className="mt-4 rounded-lg max-h-64 mx-auto" />}
                    </div>

                    <div className="space-y-4">
                      <input type="text" placeholder="Game" value={newBet.game} onChange={(e) => setNewBet({...newBet, game: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="number" placeholder="Amount" value={newBet.amount} onChange={(e) => setNewBet({...newBet, amount: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="number" placeholder="Odds" step="0.01" value={newBet.odds} onChange={(e) => setNewBet({...newBet, odds: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="text" placeholder="Sportsbook" value={newBet.sportsbook} onChange={(e) => setNewBet({...newBet, sportsbook: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="date" value={newBet.date} onChange={(e) => setNewBet({...newBet, date: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <button onClick={handleAddBet} className="w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg py-3">Add Bet</button>
                    </div>
                  </div>
                </div>
              )}

              {currentPage === 'verify' && (
                <div className="space-y-6 max-w-3xl">
                  <h2 className="text-3xl font-bold">Verify Bet Slip</h2>
                  
                  <div className="bg-gray-800 rounded-lg p-6">
                    <label className="block w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 text-center cursor-pointer">
                      <div className="flex items-center justify-center gap-2">
                        <Icon name="shield" size={20} />
                        <span>Upload Bet Slip to Verify</span>
                      </div>
                      <input type="file" accept="image/*" onChange={handleVerifySlip} className="hidden" />
                    </label>
                    {uploadedImage && <img src={uploadedImage} alt="Slip" className="mt-4 rounded-lg max-h-96 mx-auto" />}
                  </div>

                  {verificationResult && (
                    <div className="bg-gray-800 rounded-lg p-6 space-y-6">
                      <div className="text-center">
                        <h3 className={`text-3xl font-bold mb-2 ${verificationResult.verdict.includes('Legitimate') ? 'text-green-400' : 'text-red-500'}`}>
                          {verificationResult.verdict}
                        </h3>
                        <p className="text-gray-400">Confidence Score</p>
                        <div className="mt-2 bg-gray-700 rounded-full h-4 overflow-hidden">
                          <div className={`h-full ${verificationResult.confidence > 80 ? 'bg-green-500' : verificationResult.confidence > 60 ? 'bg-yellow-500' : 'bg-red-500'}`} style={{ width: `${verificationResult.confidence}%` }} />
                        </div>
                        <p className="text-2xl font-bold mt-2">{verificationResult.confidence}%</p>
                      </div>

                      <div>
                        <h4 className="text-xl font-semibold mb-4">Analysis Details</h4>
                        <div className="space-y-3">
                          {verificationResult.findings.map((finding, idx) => (
                            <div key={idx} className="flex gap-3 p-3 bg-gray-700 rounded-lg">
                              <Icon name={finding.status === 'positive' ? 'check-circle' : 'x-circle'}
                                    className={finding.status === 'positive' ? 'text-green-400' : 'text-red-500'}
                                    size={20} />
                              <div className="flex-1">
                                <p className="font-semibold">{finding.category}</p>
                                <p className="text-sm text-gray-400 mt-1">{finding.detail}</p>
                              </div
