<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verdey - Sports Betting Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900">
  <div id="app"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script type="text/babel">
    const { useState } = React;
    const Icon = ({ name, size = 20 }) => {
      const ref = React.useRef(null);
      React.useEffect(() => { if (ref.current) lucide.createIcons(); }, [name]);
      return React.createElement('i', { ref, 'data-lucide': name, style: { width: size, height: size } });
    };
    function App() {
      const [currentPage, setCurrentPage] = useState('dashboard');
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [user, setUser] = useState({ name: 'Alex Morgan', avatar: 'ðŸ‘¤', totalProfit: 2847.50, roi: 18.3, winRate: 64.2, verifiedRate: 92.5 });
      const [bets, setBets] = useState([
        { id: 1, game: 'Lakers vs Warriors', amount: 100, odds: 2.1, result: 'win', profit: 110, date: '2026-01-15', sportsbook: 'FanDuel' },
        { id: 2, game: 'Chiefs vs Bills', amount: 200, odds: 1.85, result: 'loss', profit: -200, date: '2026-01-14', sportsbook: 'DraftKings' },
        { id: 3, game: 'Celtics vs Heat', amount: 150, odds: 1.95, result: 'win', profit: 142.5, date: '2026-01-13', sportsbook: 'FanDuel' }
      ]);
      const [newBet, setNewBet] = useState({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
      const [verificationResult, setVerificationResult] = useState(null);
      const [uploadedImage, setUploadedImage] = useState(null);
      const handleImageUpload = async (e) => {
        const file = e.target.files[0];
        if (!file) return;
        setUploadedImage(URL.createObjectURL(file));
        const reader = new FileReader();
        reader.onloadend = async () => {
          try {
            const response = await fetch('https://verdey-backend.vercel.app/api/extract-bet-slip', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ image: reader.result.split(',')[1], filename: file.name })
            });
            if (!response.ok) throw new Error('Failed');
            const data = await response.json();
            setNewBet({ game: data.sportsbook || 'Game', amount: data.amount?.toString() || '0', odds: '2.15', sportsbook: data.sportsbook || 'Unknown', date: data.date || new Date().toISOString().split('T')[0] });
            alert('âœ“ Veryfi OCR Complete!');
          } catch (e) { alert('Error processing slip'); }
        };
        reader.readAsDataURL(file);
      };
      const handleAddBet = () => {
        if (newBet.game && newBet.amount && newBet.odds) {
          setBets([{ id: bets.length + 1, ...newBet, amount: parseFloat(newBet.amount), odds: parseFloat(newBet.odds), result: 'pending', profit: 0 }, ...bets]);
          setNewBet({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
          setCurrentPage('bets');
        }
      };
      const handleVerifySlip = (e) => {
        const file = e.target.files[0];
        if (file) {
          setUploadedImage(URL.createObjectURL(file));
          setTimeout(() => {
            const isLegit = Math.random() > 0.3;
            setVerificationResult({
              verdict: isLegit ? 'Likely Legitimate' : 'Likely Fabricated',
              confidence: (isLegit ? 75 : 45) + Math.floor(Math.random() * 20),
              findings: isLegit ? [
                { category: 'Font Check', status: 'positive', detail: 'Fonts match database' },
                { category: 'Timestamp', status: 'positive', detail: 'Time aligns with schedule' }
              ] : [
                { category: 'Font Check', status: 'negative', detail: 'Inconsistent fonts' },
                { category: 'Pixels', status: 'negative', detail: 'Irregular patterns' }
              ]
            });
          }, 2500);
        }
      };
      if (!isAuthenticated) {
        return (
          <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
            <div className="bg-gray-800 rounded-lg p-8 w-full max-w-md shadow-2xl">
              <div className="text-center mb-8">
                <h1 className="text-4xl font-bold text-green-500 mb-2">Verdey</h1>
                <p className="text-gray-400">Verify. Track. Win.</p>
              </div>
              <div className="space-y-4">
                <input type="email" placeholder="Email" className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                <input type="password" placeholder="Password" className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                <button onClick={() => setIsAuthenticated(true)} className="w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg px-4 py-3">Log In</button>
              </div>
            </div>
          </div>
        );
      }
      return (
        <div className="min-h-screen bg-gray-900 text-white">
          <div className={`hidden md:flex fixed left-0 top-0 h-full bg-gray-800 ${sidebarOpen ? 'w-64' : 'w-20'} flex-col z-30`}>
            <div className="p-6 flex items-center justify-between">
              {sidebarOpen && <h1 className="text-2xl font-bold text-green-500">Verdey</h1>}
              <button onClick={() => setSidebarOpen(!sidebarOpen)} className="text-gray-400"><Icon name={sidebarOpen ? "x" : "menu"} size={24} /></button>
            </div>
            <nav className="flex-1 px-4">
              <button onClick={() => setCurrentPage('dashboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'dashboard' ? 'bg-green-500' : 'text-gray-400 hover:bg-gray-700'}`}><Icon name="home" size={20} />{sidebarOpen && <span>Home</span>}</button>
              <button onClick={() => setCurrentPage('bets')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'bets' ? 'bg-green-500' : 'text-gray-400 hover:bg-gray-700'}`}><Icon name="bar-chart-3" size={20} />{sidebarOpen && <span>Bets</span>}</button>
              <button onClick={() => setCurrentPage('leaderboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'leaderboard' ? 'bg-green-500' : 'text-gray-400 hover:bg-gray-700'}`}><Icon name="users" size={20} />{sidebarOpen && <span>Leaderboard</span>}</button>
              <button onClick={() => setCurrentPage('profile')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'profile' ? 'bg-green-500' : 'text-gray-400 hover:bg-gray-700'}`}><Icon name="user" size={20} />{sidebarOpen && <span>Profile</span>}</button>
            </nav>
            <div className="p-4 space-y-2">
              <button onClick={() => setCurrentPage('addbet')} className="w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2"><Icon name="plus" size={20} />{sidebarOpen && <span>Add Bet</span>}</button>
              <button onClick={() => setCurrentPage('verify')} className="w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2"><Icon name="shield" size={20} />{sidebarOpen && <span>Verify</span>}</button>
            </div>
          </div>
          <div className={`md:ml-64 ${!sidebarOpen ? 'md:ml-20' : ''}`}>
            <div className="p-4 md:p-8">
              {currentPage === 'dashboard' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">Dashboard</h2>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Total P/L</p><p className="text-2xl font-bold text-green-400">${user.totalProfit.toFixed(2)}</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">ROI</p><p className="text-2xl font-bold text-green-400">{user.roi}%</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Win Rate</p><p className="text-2xl font-bold text-white">{user.winRate}%</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Verified</p><p className="text-2xl font-bold text-white">{user.verifiedRate}%</p></div>
                  </div>
                  <div className="bg-gray-800 rounded-lg p-6">
                    <h3 className="text-xl font-semibold mb-4">Recent Bets</h3>
                    {bets.slice(0, 5).map(bet => (
                      <div key={bet.id} className="flex justify-between p-3 bg-gray-700 rounded-lg mb-2">
                        <div><p className="font-semibold">{bet.game}</p><p className="text-sm text-gray-400">{bet.date}</p></div>
                        <div className="text-right"><p className={`font-bold ${bet.result === 'win' ? 'text-green-400' : 'text-red-500'}`}>${bet.amount}</p></div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
              {currentPage === 'bets' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">My Bets</h2>
                  {bets.map(bet => (
                    <div key={bet.id} className="bg-gray-800 rounded-lg p-6">
                      <div className="flex justify-between"><div><h3 className="text-lg font-semibold">{bet.game}</h3><p className="text-sm text-gray-400">{bet.sportsbook} - {bet.date}</p></div><div className="text-right"><p className="text-2xl font-bold">${bet.amount}</p><p className={`font-semibold ${bet.result === 'win' ? 'text-green-400' : 'text-red-500'}`}>{bet.result}</p></div></div>
                    </div>
                  ))}
                </div>
              )}{currentPage === 'leaderboard' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">Leaderboard</h2>
                  <div className="bg-gray-800 rounded-lg p-6">
                    <p className="text-gray-400">Leaderboard coming soon!</p>
                  </div>
                </div>
              )}
              {currentPage === 'profile' && (
                <div className="space-y-6">
                  <h2 className="text-3xl font-bold">Profile</h2>
                  <div className="flex items-center gap-4 mb-6">
                    <div className="text-6xl">{user.avatar}</div>
                    <div><h3 className="text-2xl font-bold">{user.name}</h3></div>
                  </div>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Total P/L</p><p className="text-2xl font-bold text-green-400">${user.totalProfit.toFixed(2)}</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">ROI</p><p className="text-2xl font-bold text-green-400">{user.roi}%</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Win Rate</p><p className="text-2xl font-bold text-white">{user.winRate}%</p></div>
                    <div className="bg-gray-800 rounded-lg p-4"><p className="text-gray-400 text-sm">Verified</p><p className="text-2xl font-bold text-white">{user.verifiedRate}%</p></div>
                  </div>
                </div>
              )}
              {currentPage === 'addbet' && (
                <div className="space-y-6 max-w-2xl">
                  <h2 className="text-3xl font-bold">Add Bet</h2>
                  <div className="bg-gray-800 rounded-lg p-6">
                    <label className="block w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 text-center cursor-pointer mb-6">
                      <div className="flex items-center justify-center gap-2"><Icon name="camera" size={20} /><span>Upload Bet Slip (Veryfi AI)</span></div>
                      <input type="file" accept="image/*" onChange={handleImageUpload} className="hidden" />
                    </label>
                    {uploadedImage && <img src={uploadedImage} alt="Slip" className="rounded-lg max-h-64 mx-auto mb-6" />}
                    <div className="space-y-4">
                      <input type="text" placeholder="Game" value={newBet.game} onChange={(e) => setNewBet({...newBet, game: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="number" placeholder="Amount" value={newBet.amount} onChange={(e) => setNewBet({...newBet, amount: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="number" placeholder="Odds" step="0.01" value={newBet.odds} onChange={(e) => setNewBet({...newBet, odds: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="text" placeholder="Sportsbook" value={newBet.sportsbook} onChange={(e) => setNewBet({...newBet, sportsbook: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <input type="date" value={newBet.date} onChange={(e) => setNewBet({...newBet, date: e.target.value})} className="w-full bg-gray-700 text-white rounded-lg px-4 py-3" />
                      <button onClick={handleAddBet} className="w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg py-3">Add Bet</button>
                    </div>
                  </div>
                </div>
              )}
              {currentPage === 'verify' && (
                <div className="space-y-6 max-w-3xl">
                  <h2 className="text-3xl font-bold">Verify Bet Slip</h2>
                  <div className="bg-gray-800 rounded-lg p-6">
                    <label className="block w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 text-center cursor-pointer">
                      <div className="flex items-center justify-center gap-2"><Icon name="shield" size={20} /><span>Upload to Verify</span></div>
                      <input type="file" accept="image/*" onChange={handleVerifySlip} className="hidden" />
                    </label>
                    {uploadedImage && <img src={uploadedImage} alt="Slip" className="mt-4 rounded-lg max-h-96 mx-auto" />}
                  </div>
                  {verificationResult && (
                    <div className="bg-gray-800 rounded-lg p-6 space-y-6">
                      <div className="text-center">
                        <h3 className={`text-3xl font-bold mb-2 ${verificationResult.verdict.includes('Legitimate') ? 'text-green-400' : 'text-red-500'}`}>{verificationResult.verdict}</h3>
                        <p className="text-gray-400">Confidence</p>
                        <div className="mt-2 bg-gray-700 rounded-full h-4"><div className={`h-full ${verificationResult.confidence > 80 ? 'bg-green-500' : 'bg-yellow-500'}`} style={{ width: `${verificationResult.confidence}%` }} /></div>
                        <p className="text-2xl font-bold mt-2">{verificationResult.confidence}%</p>
                      </div>
                      <div>
                        <h4 className="text-xl font-semibold mb-4">Analysis</h4>
                        {verificationResult.findings.map((f, i) => (
                          <div key={i} className="flex gap-3 p-3 bg-gray-700 rounded-lg mb-2">
                            <Icon name={f.status === 'positive' ? 'check-circle' : 'x-circle'} className={f.status === 'positive' ? 'text-green-400' : 'text-red-500'} size={20} />
                            <div><p className="font-semibold">{f.category}</p><p className="text-sm text-gray-400">{f.detail}</p></div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }
    ReactDOM.render(React.createElement(App), document.getElementById('app'));
  </script>
</body>
</html>
