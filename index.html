<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verdey - Sports Betting Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useState } from 'https://cdn.skypack.dev/react@18';
    import ReactDOM from 'https://cdn.skypack.dev/react-dom@18';
    import { Home, BarChart3, Users, User, Plus, Shield, Menu, X, CheckCircle, XCircle, Clock, Camera } from 'https://cdn.skypack.dev/lucide-react';

    function App() {
      const [currentPage, setCurrentPage] = React.useState('dashboard');
      const [isAuthenticated, setIsAuthenticated] = React.useState(false);
      const [sidebarOpen, setSidebarOpen] = React.useState(true);
      
      const [user, setUser] = React.useState({
        name: 'Alex Morgan',
        avatar: 'ðŸ‘¤',
        totalProfit: 2847.50,
        roi: 18.3,
        winRate: 64.2,
        verifiedRate: 92.5,
        onLeaderboard: true
      });

      const [bets, setBets] = React.useState([
        { id: 1, game: 'Lakers vs Warriors', amount: 100, odds: 2.1, result: 'win', profit: 110, date: '2026-01-15', sportsbook: 'FanDuel' },
        { id: 2, game: 'Chiefs vs Bills', amount: 200, odds: 1.85, result: 'loss', profit: -200, date: '2026-01-14', sportsbook: 'DraftKings' },
        { id: 3, game: 'Celtics vs Heat', amount: 150, odds: 1.95, result: 'win', profit: 142.5, date: '2026-01-13', sportsbook: 'FanDuel' },
        { id: 4, game: 'Cowboys vs 49ers', amount: 300, odds: 2.3, result: 'pending', profit: 0, date: '2026-01-16', sportsbook: 'BetMGM' },
        { id: 5, game: 'Knicks vs Nets', amount: 75, odds: 1.75, result: 'win', profit: 56.25, date: '2026-01-12', sportsbook: 'DraftKings' }
      ]);

      const [newBet, setNewBet] = React.useState({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
      const [uploadedImage, setUploadedImage] = React.useState(null);

      const dailyProfits = [
        { day: 'Mon', profit: 150 },
        { day: 'Tue', profit: -80 },
        { day: 'Wed', profit: 220 },
        { day: 'Thu', profit: 95 },
        { day: 'Fri', profit: -120 },
        { day: 'Sat', profit: 340 },
        { day: 'Sun', profit: 180 }
      ];

      const handleImageUpload = async (e) => {
        const file = e.target.files[0];
        if (file) {
          setUploadedImage(URL.createObjectURL(file));
          
          const reader = new FileReader();
          reader.onloadend = async () => {
            const base64Image = reader.result.split(',')[1];
            
            try {
              const response = await fetch('https://verdey-backend.vercel.app/api/extract-bet-slip', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image: base64Image, filename: file.name })
              });

              if (!response.ok) throw new Error('Backend failed');
              const data = await response.json();
              
              setNewBet({
                game: data.sportsbook || 'Game from slip',
                amount: data.amount?.toString() || '0',
                odds: '2.15',
                sportsbook: data.sportsbook || 'Unknown',
                date: data.date || new Date().toISOString().split('T')[0]
              });
              
              alert('âœ“ Veryfi extracted bet details!');
            } catch (error) {
              alert('Error processing slip. Try again.');
            }
          };
          reader.readAsDataURL(file);
        }
      };

      const handleAddBet = () => {
        if (newBet.game && newBet.amount && newBet.odds) {
          setBets([{ id: bets.length + 1, ...newBet, amount: parseFloat(newBet.amount), odds: parseFloat(newBet.odds), result: 'pending', profit: 0 }, ...bets]);
          setNewBet({ game: '', amount: '', odds: '', sportsbook: '', date: '' });
          setCurrentPage('bets');
        }
      };

      if (!isAuthenticated) {
        return React.createElement('div', { className: 'min-h-screen bg-gray-900 flex items-center justify-center p-4' },
          React.createElement('div', { className: 'bg-gray-800 rounded-lg p-8 w-full max-w-md shadow-2xl' },
            React.createElement('div', { className: 'text-center mb-8' },
              React.createElement('h1', { className: 'text-4xl font-bold text-green-500 mb-2' }, 'Verdey'),
              React.createElement('p', { className: 'text-gray-400' }, 'Verify. Track. Win.')
            ),
            React.createElement('div', { className: 'space-y-4' },
              React.createElement('div', null,
                React.createElement('label', { className: 'block text-gray-300 mb-2 text-sm' }, 'Email'),
                React.createElement('input', { type: 'email', className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', placeholder: 'you@example.com' })
              ),
              React.createElement('div', null,
                React.createElement('label', { className: 'block text-gray-300 mb-2 text-sm' }, 'Password'),
                React.createElement('input', { type: 'password', className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', placeholder: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢' })
              ),
              React.createElement('button', { 
                onClick: () => setIsAuthenticated(true), 
                className: 'w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg px-4 py-3' 
              }, 'Log In')
            )
          )
        );
      }

      const maxProfit = Math.max(...dailyProfits.map(d => Math.abs(d.profit)));

      return React.createElement('div', { className: 'min-h-screen bg-gray-900 text-white' },
        React.createElement('div', { className: `hidden md:flex fixed left-0 top-0 h-full bg-gray-800 ${sidebarOpen ? 'w-64' : 'w-20'} flex-col z-30` },
          React.createElement('div', { className: 'p-6 flex items-center justify-between' },
            sidebarOpen && React.createElement('h1', { className: 'text-2xl font-bold text-green-500' }, 'Verdey'),
            React.createElement('button', { onClick: () => setSidebarOpen(!sidebarOpen), className: 'text-gray-400' },
              React.createElement(sidebarOpen ? X : Menu, { size: 24 })
            )
          ),
          React.createElement('nav', { className: 'flex-1 px-4' },
            React.createElement('button', { 
              onClick: () => setCurrentPage('dashboard'), 
              className: `w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'dashboard' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}` 
            },
              React.createElement(Home, { size: 20 }),
              sidebarOpen && React.createElement('span', null, 'Home')
            ),
            React.createElement('button', { 
              onClick: () => setCurrentPage('bets'), 
              className: `w-full flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${currentPage === 'bets' ? 'bg-green-500 text-white' : 'text-gray-400 hover:bg-gray-700'}` 
            },
              React.createElement(BarChart3, { size: 20 }),
              sidebarOpen && React.createElement('span', null, 'Bets')
            )
          ),
          React.createElement('div', { className: 'p-4 space-y-2' },
            React.createElement('button', { 
              onClick: () => setCurrentPage('addbet'), 
              className: 'w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 flex items-center justify-center gap-2' 
            },
              React.createElement(Plus, { size: 20 }),
              sidebarOpen && React.createElement('span', null, 'Add Bet')
            )
          )
        ),
        React.createElement('div', { className: `md:ml-64 ${!sidebarOpen ? 'md:ml-20' : ''}` },
          React.createElement('div', { className: 'p-4 md:p-8' },
            currentPage === 'dashboard' && React.createElement('div', { className: 'space-y-6' },
              React.createElement('h2', { className: 'text-3xl font-bold' }, 'Dashboard'),
              React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4' },
                React.createElement('div', { className: 'bg-gray-800 rounded-lg p-4' },
                  React.createElement('p', { className: 'text-gray-400 text-sm mb-1' }, 'Total P/L'),
                  React.createElement('p', { className: `text-2xl font-bold ${user.totalProfit > 0 ? 'text-green-400' : 'text-red-500'}` }, `$${user.totalProfit.toFixed(2)}`)
                ),
                React.createElement('div', { className: 'bg-gray-800 rounded-lg p-4' },
                  React.createElement('p', { className: 'text-gray-400 text-sm mb-1' }, 'ROI'),
                  React.createElement('p', { className: 'text-2xl font-bold text-green-400' }, `${user.roi}%`)
                ),
                React.createElement('div', { className: 'bg-gray-800 rounded-lg p-4' },
                  React.createElement('p', { className: 'text-gray-400 text-sm mb-1' }, 'Win Rate'),
                  React.createElement('p', { className: 'text-2xl font-bold text-white' }, `${user.winRate}%`)
                ),
                React.createElement('div', { className: 'bg-gray-800 rounded-lg p-4' },
                  React.createElement('p', { className: 'text-gray-400 text-sm mb-1' }, 'Verified'),
                  React.createElement('p', { className: 'text-2xl font-bold text-white' }, `${user.verifiedRate}%`)
                )
              )
            ),
            currentPage === 'bets' && React.createElement('div', { className: 'space-y-6' },
              React.createElement('h2', { className: 'text-3xl font-bold' }, 'My Bets'),
              ...bets.map(bet => React.createElement('div', { key: bet.id, className: 'bg-gray-800 rounded-lg p-6' },
                React.createElement('div', { className: 'flex justify-between items-center' },
                  React.createElement('div', null,
                    React.createElement('h3', { className: 'text-lg font-semibold' }, bet.game),
                    React.createElement('p', { className: 'text-sm text-gray-400' }, `${bet.date} - ${bet.sportsbook}`)
                  ),
                  React.createElement('div', { className: 'text-right' },
                    React.createElement('p', { className: 'text-2xl font-bold' }, `$${bet.amount}`),
                    React.createElement('p', { className: `font-semibold ${bet.result === 'win' ? 'text-green-400' : bet.result === 'loss' ? 'text-red-500' : 'text-yellow-400'}` },
                      bet.result === 'pending' ? 'Pending' : bet.result === 'win' ? 'Win' : 'Loss'
                    )
                  )
                )
              ))
            ),
            currentPage === 'addbet' && React.createElement('div', { className: 'space-y-6 max-w-2xl' },
              React.createElement('h2', { className: 'text-3xl font-bold' }, 'Add Bet'),
              React.createElement('div', { className: 'bg-gray-800 rounded-lg p-6' },
                React.createElement('label', { className: 'block w-full bg-green-500 hover:bg-green-600 text-white rounded-lg py-3 px-4 text-center cursor-pointer mb-6' },
                  React.createElement('div', { className: 'flex items-center justify-center gap-2' },
                    React.createElement(Camera, { size: 20 }),
                    React.createElement('span', null, 'Upload Bet Slip (Veryfi AI)')
                  ),
                  React.createElement('input', { type: 'file', accept: 'image/*', onChange: handleImageUpload, className: 'hidden' })
                ),
                uploadedImage && React.createElement('img', { src: uploadedImage, alt: 'Uploaded', className: 'mt-4 rounded-lg max-h-64 mx-auto mb-6' }),
                React.createElement('div', { className: 'space-y-4' },
                  React.createElement('input', { 
                    type: 'text', 
                    value: newBet.game, 
                    onChange: (e) => setNewBet({...newBet, game: e.target.value}), 
                    className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', 
                    placeholder: 'Game' 
                  }),
                  React.createElement('input', { 
                    type: 'number', 
                    value: newBet.amount, 
                    onChange: (e) => setNewBet({...newBet, amount: e.target.value}), 
                    className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', 
                    placeholder: 'Amount ($)' 
                  }),
                  React.createElement('input', { 
                    type: 'number', 
                    step: '0.01', 
                    value: newBet.odds, 
                    onChange: (e) => setNewBet({...newBet, odds: e.target.value}), 
                    className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', 
                    placeholder: 'Odds' 
                  }),
                  React.createElement('input', { 
                    type: 'text', 
                    value: newBet.sportsbook, 
                    onChange: (e) => setNewBet({...newBet, sportsbook: e.target.value}), 
                    className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3', 
                    placeholder: 'Sportsbook' 
                  }),
                  React.createElement('input', { 
                    type: 'date', 
                    value: newBet.date, 
                    onChange: (e) => setNewBet({...newBet, date: e.target.value}), 
                    className: 'w-full bg-gray-700 text-white rounded-lg px-4 py-3' 
                  }),
                  React.createElement('button', { 
                    onClick: handleAddBet, 
                    className: 'w-full bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg py-3' 
                  }, 'Add Bet')
                )
              )
            )
          )
        )
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
